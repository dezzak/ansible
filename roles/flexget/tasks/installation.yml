---
- name: Ensure flexget packages installed
  apt: name={{ item }} state=installed
  with_items:
    - python2.7
    - python-pip
    - python2.7-dev

- name: Ensure that pip is updated
  pip: name=setuptools state=latest

- name: Ensure that flexget is installed
  pip: name=flexget state=latest
  notify: restart flexget

- name: Ensure that defaults file is set
  template: src=flexget_template.j2 dest=/etc/default/flexget
  notify: restart flexget

- name: Ensure that init script is set
  copy: src=flexget_init dest=/etc/init.d/flexget mode=0755
  notify: restart flexget

- name: Ensure that service is enabled
  service: name=flexget enabled=yes
